<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bt.mapper.goods">
	
	<select id="selectGoodsList" resultType="kr.co.booktopia.vo.ShopGoodsVO">
		<![CDATA[
			select g.*, d.fileName from BT_SHOP_GOODS AS g, BT_SHOP_GOODS_IMAGE AS d
			where g.GOODS_ID=d.GOODS_ID AND d.FILETYPE='main_image' and g.GOODS_STATUS=#{goodsStatus}
			order by g.GOODS_CREDATE;
		]]>
		
	</select>
	
	<select id="selectGoodsDetail" resultType="kr.co.booktopia.vo.ShopGoodsVO">
		select g.*, d.fileName from BT_SHOP_GOODS g, BT_SHOP_GOODS_IMAGE d
		where g.GOODS_ID=d.GOODS_ID
		and d.FILETYPE='main_image'
		and g.GOODS_ID=#{goods_id};
	</select>

	<select id="selectGoodsImage" resultType="kr.co.booktopia.vo.ShopGoodsImageVO">
		select * from BT_SHOP_GOODS_IMAGE
		where FILETYPE != 'main_image' and GOODS_id=#{goods_id};
	</select>
	
	<select id="selectGoodsBySearchWord" resultType="kr.co.booktopia.vo.ShopGoodsVO">
		select g.*, d.fileName from BT_SHOP_GOODS g, BT_SHOP_GOODS_IMAGE d
		where g.GOODS_ID=d.GOODS_ID
		and d.FILETYPE='main_image'
		and g.GOODS_TITLE LIKE CONCAT('%', #{searchWord}, '%')
		order by g.GOODS_CREDATE desc;
	</select>
	
	<select id="selectKeywordSearchForAutoComplete" resultType="String">
		select GOODS_TITLE from BT_SHOP_GOODS
		where GOODS_TITLE LIKE CONCAT('%', #{keyword}, '%')
		order by GOODS_CREDATE desc;
	</select>
</mapper>





